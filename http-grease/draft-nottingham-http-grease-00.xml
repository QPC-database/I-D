<?xml version="1.0" encoding="UTF-8"?>
  <?xml-stylesheet type="text/xsl" href="rfc2629.xslt" ?>
  <!-- generated by https://github.com/cabo/kramdown-rfc2629 version 1.3.3 -->

<!DOCTYPE rfc SYSTEM "../Tools/rfcbootstrap/rfc2629.dtd" [
]>

<?rfc toc="yes"?>
<?rfc tocindent="yes"?>
<?rfc sortrefs="yes"?>
<?rfc symrefs="yes"?>
<?rfc strict="yes"?>
<?rfc compact="yes"?>
<?rfc comments="yes"?>
<?rfc inline="yes"?>

<rfc ipr="trust200902" docName="draft-nottingham-http-grease-00" category="bcp">

  <front>
    <title>Greasing HTTP</title>

    <author initials="M." surname="Nottingham" fullname="Mark Nottingham">
      <organization></organization>
      <address>
        <postal>
          <street>made in</street>
          <city>Prahran</city>
          <region>VIC</region>
          <country>Australia</country>
        </postal>
        <email>mnot@mnot.net</email>
        <uri>https://www.mnot.net/</uri>
      </address>
    </author>

    <date year="2020"/>

    <area>General</area>
    
    <keyword>Internet-Draft</keyword>

    <abstract>


<t>Like many network protocols, HTTP is vulnerable to ossification of its extensibility points. This draft explains why HTTP ossification is a problem and establishes guidelines for exercising those extensions by ‘greasing’ the protocol to combat it.</t>



    </abstract>


    <note title="Note to Readers">


<t><spanx style="emph">RFC EDITOR: please remove this section before publication</spanx></t>

<t>The issues list for this draft can be found at <eref target="https://github.com/mnot/I-D/labels/http-grease">https://github.com/mnot/I-D/labels/http-grease</eref>.</t>

<t>The most recent (often, unpublished) draft is at <eref target="https://mnot.github.io/I-D/http-grease/">https://mnot.github.io/I-D/http-grease/</eref>.</t>

<t>Recent changes are listed at <eref target="https://github.com/mnot/I-D/commits/gh-pages/http-grease">https://github.com/mnot/I-D/commits/gh-pages/http-grease</eref>.</t>

<t>See also the draft’s current status in the IETF datatracker, at
<eref target="https://datatracker.ietf.org/doc/draft-nottingham-http-grease/">https://datatracker.ietf.org/doc/draft-nottingham-http-grease/</eref>.</t>


    </note>


  </front>

  <middle>


<section anchor="introduction" title="Introduction">

<t>Like many network protocols, HTTP is vulnerable to ossification of its extensibility points. Ossification happens when a significant number of the systems that generate, transmit, handle, or consume the protocol don’t accept a new extension, thereby making it more difficult to deploy extensions.</t>

<t>For example, TCP has effectively been ossified by middleboxes that assume that new TCP options will not be deployed; likewise, the Protocol field in IP has been effectively ossified as well, since so many networks will only accept TCP or UDP traffic.</t>

<t>Addressing this issue is important; protocol extensibility allows adaptation to new circumstances as well as application to new use cases. Inability to deploy new extensions creates pressure to misuse the protocol – often leading to undesirable side effects – or to use other protocols, reducing the value that the community gets from a shared, standard protocol.</t>

<t>While there are a few ways that protocol designers can mitigate ossification, this document focuses on a technique that’s well suited to many of the ossification risks in HTTP: ‘greasing’ extensibility points by exercising them, so that they don’t become ‘rusted shut.’</t>

<t><xref target="RFC8701"/>) pioneered greasing techniques in IETF protocols; this document explains how they apply to HTTP. It focuses on generic HTTP features; other documents cover versioned extensibility points (e.g., see <xref target="I-D.bishop-httpbis-grease"/>).</t>

<section anchor="notational-conventions" title="Notational Conventions">

<t>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “NOT RECOMMENDED”, “MAY”, and “OPTIONAL” in this document are to be interpreted as described in BCP 14 <xref target="RFC2119"/> <xref target="RFC8174"/> when, and only when, they appear in all capitals, as shown here.</t>

</section>
</section>
<section anchor="ossification-and-http" title="Ossification and HTTP">

<t>As an application protocol, HTTP has several extensibility points. For example, methods, status codes, header and trailer fields, cache directives, range units and content codings are all HTTP extension points.</t>

<t>Each extension point defines how unrecognised values should be handled; in most cases, they should be ignored (e.g. header fields, cache directives and range units), while in a few cases they have other handling (e.g., unrecognised methods result in a 405 status code; unrecognised status codes devolve to a more generic x00 status code).</t>

<t>Implementations and other components that diverge from these defined behaviours risk ossifying that extensibility point.</t>

<t>For example, it is increasingly common for Web Application Firewalls (WAFs), bot detection services and similar components to reject HTTP requests that contain header fields with certain characters or strings, even though syntactically valid, and even though the header fields are not necessarily recognised by the recipient.</t>

<t>This behaviour has become prevalent enough to make it difficult for Web browsers and other clients to introduce new request header fields. That difficulty is aggravated by two factors:</t>

<t><list style="numbers">
  <t>A relatively large number of vendors create these components, but have little coordination between them, leading to wide variances in behaviour, and</t>
  <t>Many of these components’ deployments are not updated regularly and reliably, leading to difficulty in addressing ossification issues even when they are identified.</t>
</list></t>

<t>To avoid ossification of request header fields, it is Best Current Practice to grease them, as explained below. Other HTTP extensibility points might be added in the future, and it is not to be inferred that greasing other HTTP extensibility points is not good practice.</t>

<section anchor="greasing-http-request-header-fields" title="Greasing HTTP Request Header Fields">

<t>HTTP clients SHOULD grease request header fields. There are two aims in doing so:</t>

<t><list style="numbers">
  <t>Preserving the ability to add new request header fields over time</t>
  <t>Preserving the ability to add new request header fields with values containing common syntax</t>
</list></t>

<t>Clients can grease a given request at their discretion. For example, a client implementation might add one or more grease request header fields to every request it makes, or it might add one to every third or tenth request.</t>

<t>Depending on the deployment model of the client, it might do this in production releases automatically (especially if there are ways that it can modify how grease values are sent with a high degree of control, in case too many errors are encountered), or it might do so only in pre-releases.</t>

<t>Grease field names SHOULD be hard to predict; e.g., they SHOULD NOT have any identifying prefix, suffix, or pattern. However, they MUST NOT be likely to conflict with unregistered or future field names, and the grease coordinator MUST avoid potentially offensive or confusing terms. They also MUST conform to the syntactic requirements for field names in HTTP (<xref target="I-D.ietf-httpbis-semantics"/>, Section 4.3).</t>

<t>This can be achieved in different ways (which SHOULD vary from time to time), for example:</t>

<t><list style="symbols">
  <t>Combine two or three dictionary words or proper nouns with a hyphen (e.g., ‘Skateboard-Clancy’, ‘Murray-Fortnight-Scout’)</t>
  <t>Append digits to a dictionary word (e.g., ‘Turnstile23’)</t>
  <t>Generate a string using a hash or similar function (e.g., ‘dd722785c01b’)</t>
</list></t>

<t>Grease field names are not required to be registered in the IANA HTTP Field Name Registry, unless they are intended to be used over an extended period of time (e.g., more than one year). However, they MAY be registered as Provisional with a reference to this RFC or another explanatory resource, to help interested parties to find out what they are used for. Such registered values SHOULD be removed after the client stops using that field.</t>

<t>Greasing clients SHOULD not reuse other clients’ grease fields names, unless they coordinate.</t>

<t>Grease field values can be fixed strings, or dynamically generated at runtime. It is RECOMMENDED that greasing clients exercise the various types in <xref target="I-D.ietf-httpbis-header-structure"/>.</t>

<t>If an error is encountered by a greasing client, it SHOULD NOT re-issue the request without the grease value, since hiding the consequences of the failure doesn’t serve the purpose of greasing.</t>

<t>Greasing clients SHOULD announce new field names they intend to grease on the http-grease@ietf.org mailing list.</t>

</section>
</section>
<section anchor="security-considerations" title="Security Considerations">

<t>Some HTTP extensibility points are becoming (or have become) ossified because of security considerations; receiving implementations believe that it is more secure to reject unknown values, or that they can identify undesirable peers through their use of extensions.</t>

<t>This document does not directly address these concerns, nor does it directly disallow such behaviour. Instead, it aims to encourage the ability to accommodate new extensions more quickly than is now possible.</t>

</section>


  </middle>

  <back>

    <references title='Normative References'>





<reference  anchor="RFC2119" target='https://www.rfc-editor.org/info/rfc2119'>
<front>
<title>Key words for use in RFCs to Indicate Requirement Levels</title>
<author initials='S.' surname='Bradner' fullname='S. Bradner'><organization /></author>
<date year='1997' month='March' />
<abstract><t>In many standards track documents several words are used to signify the requirements in the specification.  These words are often capitalized. This document defines these words as they should be interpreted in IETF documents.  This document specifies an Internet Best Current Practices for the Internet Community, and requests discussion and suggestions for improvements.</t></abstract>
</front>
<seriesInfo name='BCP' value='14'/>
<seriesInfo name='RFC' value='2119'/>
<seriesInfo name='DOI' value='10.17487/RFC2119'/>
</reference>



<reference  anchor="RFC8174" target='https://www.rfc-editor.org/info/rfc8174'>
<front>
<title>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</title>
<author initials='B.' surname='Leiba' fullname='B. Leiba'><organization /></author>
<date year='2017' month='May' />
<abstract><t>RFC 2119 specifies common key words that may be used in protocol  specifications.  This document aims to reduce the ambiguity by clarifying that only UPPERCASE usage of the key words have the  defined special meanings.</t></abstract>
</front>
<seriesInfo name='BCP' value='14'/>
<seriesInfo name='RFC' value='8174'/>
<seriesInfo name='DOI' value='10.17487/RFC8174'/>
</reference>



<reference anchor="I-D.ietf-httpbis-semantics">
<front>
<title>HTTP Semantics</title>

<author initials='R' surname='Fielding' fullname='Roy Fielding'>
    <organization />
</author>

<author initials='M' surname='Nottingham' fullname='Mark Nottingham'>
    <organization />
</author>

<author initials='J' surname='Reschke' fullname='Julian Reschke'>
    <organization />
</author>

<date month='October' day='2' year='2020' />

<abstract><t>The Hypertext Transfer Protocol (HTTP) is a stateless application- level protocol for distributed, collaborative, hypertext information systems.  This document defines the semantics of HTTP: its architecture, terminology, the "http" and "https" Uniform Resource Identifier (URI) schemes, core request methods, request header fields, response status codes, response header fields, and content negotiation.  This document obsoletes RFC 2818, RFC 7231, RFC 7232, RFC 7233, RFC 7235, RFC 7538, RFC 7615, RFC 7694, and portions of RFC 7230.</t></abstract>

</front>

<seriesInfo name='Internet-Draft' value='draft-ietf-httpbis-semantics-12' />
<format type='TXT'
        target='http://www.ietf.org/internet-drafts/draft-ietf-httpbis-semantics-12.txt' />
</reference>




    </references>

    <references title='Informative References'>





<reference  anchor="RFC8701" target='https://www.rfc-editor.org/info/rfc8701'>
<front>
<title>Applying Generate Random Extensions And Sustain Extensibility (GREASE) to TLS Extensibility</title>
<author initials='D.' surname='Benjamin' fullname='D. Benjamin'><organization /></author>
<date year='2020' month='January' />
<abstract><t>This document describes GREASE (Generate Random Extensions And Sustain Extensibility), a mechanism to prevent extensibility failures in the TLS ecosystem. It reserves a set of TLS protocol values that may be advertised to ensure peers correctly handle unknown values.</t></abstract>
</front>
<seriesInfo name='RFC' value='8701'/>
<seriesInfo name='DOI' value='10.17487/RFC8701'/>
</reference>



<reference anchor="I-D.bishop-httpbis-grease">
<front>
<title>GREASE for HTTP/2</title>

<author initials='M' surname='Bishop' fullname='Mike Bishop'>
    <organization />
</author>

<date month='June' day='24' year='2020' />

<abstract><t>Reserves several values in the HTTP/2 registries to exercise the requirement that clients and servers ignore unknown values.</t></abstract>

</front>

<seriesInfo name='Internet-Draft' value='draft-bishop-httpbis-grease-01' />
<format type='TXT'
        target='http://www.ietf.org/internet-drafts/draft-bishop-httpbis-grease-01.txt' />
</reference>



<reference anchor="I-D.ietf-httpbis-header-structure">
<front>
<title>Structured Field Values for HTTP</title>

<author initials='M' surname='Nottingham' fullname='Mark Nottingham'>
    <organization />
</author>

<author initials='P' surname='Kamp' fullname='Poul-Henning Kamp'>
    <organization />
</author>

<date month='June' day='3' year='2020' />

<abstract><t>This document describes a set of data types and associated algorithms that are intended to make it easier and safer to define and handle HTTP header and trailer fields, known as "Structured Fields", "Structured Headers", or "Structured Trailers".  It is intended for use by specifications of new HTTP fields that wish to use a common syntax that is more restrictive than traditional HTTP field values.</t></abstract>

</front>

<seriesInfo name='Internet-Draft' value='draft-ietf-httpbis-header-structure-19' />
<format type='TXT'
        target='http://www.ietf.org/internet-drafts/draft-ietf-httpbis-header-structure-19.txt' />
</reference>




    </references>




  </back>

<!-- ##markdown-source:
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
MVro/B4pkP0XmmGMmjcfAAA=

-->

</rfc>

